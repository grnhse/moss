<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Announcing Greenhouse's PHP Package</title>
  <meta name="description" content="A couple weeks ago, I wrote a post about PHP’s Libcurl and its unfortunate interaction with Rails.  The long story made short is this: Rails does not like th...">

  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://tech.greenhouse.io/2016/04/04/announcing-greenhouse-php-package.html">
  <link rel="alternate" type="application/rss+xml" title="In the Weeds - A blog by the Greenhouse Engineering Team" href="https://tech.greenhouse.io/feed.xml" />
  <script src="/javascripts/jquery-2.1.4.js" type="text/javascript"></script>

  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">

  <meta content="In the Weeds - A blog by the Greenhouse Engineering Team" property="og:site_name">
  
    <meta content="Announcing Greenhouse's PHP Package" property="og:title">
  

  
    <meta content="article" property="og:type">
  

  
    <meta content="a blog by the Greenhouse Engineering team" property="og:description">
  

  
    <meta property="og:url" content="https://tech.greenhouse.io/2016/04/04/announcing-greenhouse-php-package.html">
  

  
    <meta content="2016-04-04T00:00:00-04:00" property="article:published_time">
  

  <meta content="http://cdn2.hubspot.net/hub/372554/img/logoNavSmall.png" property="og:image">

  
    
      <meta content="php" property="article:tag">
    
  
</head>


  <body>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67233801-1', 'auto');
  ga('send', 'pageview');

</script>
<header class="site-header">

  <div class="wrapper">

    <div>
      <a href="/">
        <img class="header-icon" src="/images/dandelion.png" alt="dandelion">
      </a>
    </div>
    <a class="site-title" href="/">IN THE WEEDS</a>
    <p class="site-subheader">A BLOG BY THE GREENHOUSE<br>
    ENGINEERING TEAM</p>

  </div>

</header>

<hr class="divider">



    <div class="page-content">
      <div class="wrapper">
  <div class="post">

    

    <header class="post-header">
      <h2 class="post-title">Announcing Greenhouse's PHP Package</h2>
      <p class="post-meta">Apr 4, 2016 • <a href="https://www.twitter.com/tdphillipsjr" target="_blank">Tom Phillips</a></p>
    </header>


    <article class="post-content">
      <p>A couple weeks ago, I wrote a post about PHP’s Libcurl and its <a href="https://tech.greenhouse.io/2016/03/21/php-has-a-multiselect-bug-and-rails-doesnt-like-it.html">unfortunate interaction with Rails.</a>  The long story made short is this: Rails does not like the way that PHP sends multiple values on one parameter in form submissions.  In that post, I suggested our users use <a href="http://docs.guzzlephp.org/en/latest/">Guzzle</a>, which is a great library for interacting with APIs.  While that suggestion still works, we can also offer a second option today.</p>

<p>Greenhouse is a great place to work and that is rarely more evident than when a problem like this presents itself.  After diagnosing this problem, I suggested to our management team that this would be best solved by growing our own Greenhouse PHP package.  It would hide implementation details from the user and could be written in such a way that both uses Guzzle and allow engineers to post to our applications endpoint in the most natural way.  It didn’t lead to weeks of meetings, bureaucracy, and review to ultimately be killed; instead, this clear solution was encouraged.  I was able to pause what I was working on and churn this package out, thus solving a problem for many of our current and future customers.  </p>

<p>With that, I wrote <a href="https://github.com/grnhse/greenhouse-tools-php">Greenhouse Tools</a> for our customers.  The Greenhouse Tools package exists to help engineers more quickly set up their Greenhouse job board by providing a package of tools for retrieving items from the <a href="https://developers.greenhouse.io/job-board.html">Greenhouse Job Board API</a>.  </p>

<p>The part of this package that addresses the multiselect bug is the Application Service.  With the Greenhouse Application Service, I addressed the following three issues:</p>

<ol>
  <li>The Greenhouse application endpoint’s requirement that required fields be verified on the client-side.  This package checks for the required flag in real-time and raises an error if any required fields are missing values.</li>
  <li>Shield users from implementation details.  Users should know <code>$jobService-&gt;getJobs();</code> will always return a list of jobs, even if the implementation details have changed behind the scenes.  We don’t want our users always needing new libraries, just one that will always work.</li>
  <li>Allowing engineers to post applications to Greenhouse in a way as close to the most natural implementation of PHP’s libcurl.</li>
</ol>

<p>The only difference in posting via the Greenhouse service and posting via Libcurl is in the submission of multiple values to a single parameter.  While Libcurl would expect you to post the following:</p>

<pre><code>&lt;?php

$postVars = array(
	'first_name' =&gt; 'Tommy',
	'last_name' =&gt; 'Tester',
	'email' =&gt; 'tommy.tester@example.com',
	'resume' =&gt; new \CURLFile('/path/to/resume.doc', 
                              'application/msword', 
                              'resume.doc'),
	'var[0]' =&gt; 'foo',
	'var[1]' =&gt; 'bar',
	'var[2]' =&gt; 'baz'
);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postVars);
</code></pre>

<p>The Greenhouse application service lets you do the following:</p>

<pre><code>&lt;?php

$postVars = array(
	'first_name' =&gt; 'Tommy',
	'last_name' =&gt; 'Tester',
	'email' =&gt; 'tommy.tester@example.com',
	'resume' =&gt; new \CURLFile('/path/to/resume.doc', 
                              'application/msword', 
                              'resume.doc'),
	'var' =&gt; array('foo', 'bar', 'baz')
);
$applicationService-&gt;postApplication($postVars);
</code></pre>

<p>That’s it!  The Greenhouse Application Service will translate this to a valid Guzzle request, validate required fields are included, and POST the application while not requiring the engineer have any knowledge of Guzzle.  If any errors are encountered in the process, we will throw a <code>GreenhouseException</code> which can be caught and handled on the customer end.</p>

<p>I was happy to be able to put this package together for our customers and to give Greenhouse a presence on Packagist.  I hope engineers find this package useful and it helps them to implement Greenhouse quickly and effectively on their websites.</p>


      
      
        
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
                
            
          
            
          
          
          
            
          
        
      

      <p id="post-meta">Posted with <a href="/blog/tag/php/index.html">PHP</a></p>
    </article>

  </div>

  
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES * * */
        var disqus_shortname = 'greenhouseengineeeringblog';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  

</div>

    </div>

    <hr class="divider">

<footer class="site-footer">

  <div class="wrapper">

    <!--<h2 class="footer-heading">In the Weeds - A blog by the Greenhouse Engineering Team</h2>-->

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Greenhouse Engineering</li>
          <li><a href="http://www.greenhouse.io/">Greenhouse.io</a></li>
          <li><a href="http://grnh.se/xt6m8g">We're Hiring!</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <a href="http://www.greenhouse.io/">
        <img class="logo" src="/images/logoWhite.png" alt="white greenhouse logo">
        </a>
      </div>

      <div class="footer-col  footer-col-3">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/grnhse">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">grnhse</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/greenhouse">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">greenhouse</span>
            </a>
          </li>
          
        </ul>
      </div>

      <!--<div class="footer-col  footer-col-3">-->
        <!--<p class="text">a blog by the Greenhouse Engineering team</p>-->
      <!--</div>-->
    </div>

  </div>

</footer>


  </body>

</html>

